<!-- START SIGMA IMPORTS -->
<script src="linkurious.js/src/sigma.core.js"></script>
<script src="linkurious.js/src/conrad.js"></script>
<script src="linkurious.js/src/utils/sigma.utils.js"></script>
<script src="linkurious.js/src/utils/sigma.polyfills.js"></script>
<script src="linkurious.js/src/sigma.settings.js"></script>
<script src="linkurious.js/src/classes/sigma.classes.dispatcher.js"></script>
<script src="linkurious.js/src/classes/sigma.classes.configurable.js"></script>
<script src="linkurious.js/src/classes/sigma.classes.graph.js"></script>
<script src="linkurious.js/src/classes/sigma.classes.camera.js"></script>
<script src="linkurious.js/src/classes/sigma.classes.quad.js"></script>
<script src="linkurious.js/src/captors/sigma.captors.mouse.js"></script>
<script src="linkurious.js/src/captors/sigma.captors.touch.js"></script>
<script src="linkurious.js/src/renderers/sigma.renderers.canvas.js"></script>
<script src="linkurious.js/src/renderers/sigma.renderers.webgl.js"></script>
<script src="linkurious.js/src/renderers/sigma.renderers.svg.js"></script>
<script src="linkurious.js/src/renderers/sigma.renderers.def.js"></script>
<script src="linkurious.js/src/renderers/webgl/sigma.webgl.nodes.def.js"></script>
<script src="linkurious.js/src/renderers/webgl/sigma.webgl.nodes.fast.js"></script>
<script src="linkurious.js/src/renderers/webgl/sigma.webgl.edges.def.js"></script>
<script src="linkurious.js/src/renderers/webgl/sigma.webgl.edges.fast.js"></script>
<script src="linkurious.js/src/renderers/webgl/sigma.webgl.edges.arrow.js"></script>
<script src="linkurious.js/src/renderers/canvas/sigma.canvas.labels.def.js"></script>
<script src="linkurious.js/src/renderers/canvas/sigma.canvas.hovers.def.js"></script>
<script src="linkurious.js/src/renderers/canvas/sigma.canvas.nodes.def.js"></script>
<script src="linkurious.js/src/renderers/canvas/sigma.canvas.edges.def.js"></script>
<script src="linkurious.js/src/renderers/canvas/sigma.canvas.edges.curve.js"></script>
<script src="linkurious.js/src/renderers/canvas/sigma.canvas.edges.arrow.js"></script>
<script src="linkurious.js/src/renderers/canvas/sigma.canvas.edges.curvedArrow.js"></script>
<script src="linkurious.js/src/renderers/canvas/sigma.canvas.edgehovers.def.js"></script>
<script src="linkurious.js/src/renderers/canvas/sigma.canvas.edgehovers.curve.js"></script>
<script src="linkurious.js/src/renderers/canvas/sigma.canvas.edgehovers.arrow.js"></script>
<script src="linkurious.js/src/renderers/canvas/sigma.canvas.edgehovers.curvedArrow.js"></script>
<script src="linkurious.js/src/renderers/canvas/sigma.canvas.extremities.def.js"></script>
<script src="linkurious.js/src/renderers/svg/sigma.svg.utils.js"></script>
<script src="linkurious.js/src/renderers/svg/sigma.svg.nodes.def.js"></script>
<script src="linkurious.js/src/renderers/svg/sigma.svg.edges.def.js"></script>
<script src="linkurious.js/src/renderers/svg/sigma.svg.edges.curve.js"></script>
<script src="linkurious.js/src/renderers/svg/sigma.svg.labels.def.js"></script>
<script src="linkurious.js/src/renderers/svg/sigma.svg.hovers.def.js"></script>
<script src="linkurious.js/src/middlewares/sigma.middlewares.rescale.js"></script>
<script src="linkurious.js/src/middlewares/sigma.middlewares.copy.js"></script>
<script src="linkurious.js/src/misc/sigma.misc.animation.js"></script>
<script src="linkurious.js/src/misc/sigma.misc.bindEvents.js"></script>
<script src="linkurious.js/src/misc/sigma.misc.bindDOMEvents.js"></script>
<script src="linkurious.js/src/misc/sigma.misc.drawHovers.js"></script>
<!-- END SIGMA IMPORTS -->
<script src="linkurious.js/plugins/sigma.plugins.dragNodes/settings.js"></script>
<script src="linkurious.js/plugins/sigma.plugins.dragNodes/sigma.plugins.dragNodes.js"></script>

<script src="linkurious.js/plugins/sigma.helpers.graph/sigma.helpers.graph.js"></script>
<script src="linkurious.js/plugins/sigma.plugins.activeState/sigma.plugins.activeState.js"></script>
<script src="linkurious.js/plugins/sigma.plugins.select/sigma.plugins.select.js"></script>
<script src="linkurious.js/plugins/sigma.plugins.keyboard/sigma.plugins.keyboard.js"></script>

<script src="linkurious.js/plugins/sigma.renderers.linkurious/settings.js"></script>
<script src="linkurious.js/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.labels.def.js"></script>
<script src="linkurious.js/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.hovers.def.js"></script>
<script src="linkurious.js/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.def.js"></script>
<script src="linkurious.js/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.cross.js"></script>
<script src="linkurious.js/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.diamond.js"></script>
<script src="linkurious.js/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.equilateral.js"></script>
<script src="linkurious.js/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.square.js"></script>
<script src="linkurious.js/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.star.js"></script>
<script src="linkurious.js/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edges.def.js"></script>
<script src="linkurious.js/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edges.curve.js"></script>
<script src="linkurious.js/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edges.arrow.js"></script>
<script src="linkurious.js/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edges.curvedArrow.js"></script>

<script src="linkurious.js/plugins/sigma.plugins.tooltips/sigma.plugins.tooltips.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.8.1/mustache.min.js"></script>

<script src="linkurious.js/plugins/sigma.renderers.customShapes/shape-library.js"></script>
<script src="linkurious.js/plugins/sigma.renderers.customShapes/sigma.renderers.customShapes.js"></script>
<script src="linkurious.js/plugins/sigma.plugins.dragNodes/sigma.plugins.dragNodes.js"></script>

<div id="container">
  <style>
 
    .sigma-tooltip {
      max-width: 240px;
      max-height: 380px;
      background-color: rgb(249, 247, 237);
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      border-radius: 6px;
    }

    .sigma-tooltip-header {
      font-variant: small-caps;
      font-size: 120%;
      color: #437356;
      border-bottom: 1px solid #aac789;
      padding: 10px;
    }

    .sigma-tooltip-body {
      padding: 10px;
    }
    
     .avatar {
      font-variant: small-caps;
      font-size: 120%;
      color: #437356;
      border-bottom: 1px solid #aac789;
      padding: 10px;
      
    }

    .sigma-tooltip-body th {
      color: #999;
      text-align: left;
    }

    .sigma-tooltip-footer {
      padding: 10px;
      border-top: 1px solid #aac789;
    }

    .sigma-tooltip > .arrow {
      border-width: 10px;
      position: absolute;
      display: block;
      width: 0;
      height: 0;
      border-color: transparent;
      border-style: solid;
    }

    .sigma-tooltip.top {
      margin-top: -12px;
    }
    .sigma-tooltip.top > .arrow {
      left: 50%;
      bottom: -10px;
      margin-left: -10px;
      border-top-color: rgb(249, 247, 237);
      border-bottom-width: 0;
    }

    .sigma-tooltip.bottom {
      margin-top: 12px;
    }
    .sigma-tooltip.bottom > .arrow {
      left: 50%;
      top: -10px;
      margin-left: -10px;
      border-bottom-color: rgb(249, 247, 237);
      border-top-width: 0;
    }

    .sigma-tooltip.left {
      margin-left: -12px;
    }
    .sigma-tooltip.left > .arrow {
      top: 50%;
      right: -10px;
      margin-top: -10px;
      border-left-color: rgb(249, 247, 237);
      border-right-width: 0;
    }

    .sigma-tooltip.right {
      margin-left: 12px;
    }
    .sigma-tooltip.right > .arrow {
      top: 50%;
      left: -10px;
      margin-top: -10px;
      border-right-color: rgb(249, 247, 237);
      border-left-width: 0;
    }
  
    #graph-container {
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      position: absolute;
    }

    #sidebar {
      bottom: 0;
      right: 0;
      width: 200px;
      height: 150px;
      position: absolute;
      background-color: #999;
      padding: 10px;
    }
  </style>
  
  <div id="graph-container"></div>

</div>
<script>
/**
 * This example shows how to use the dragNodes plugin.
 */
 
 sigma.utils.pkg('sigma.canvas.nodes');
 
var i,
    s,
    N = 100,
    E = 500,
    urls = [
            'sigma.js/src/img/forlan.png',
            'sigma.js/src/img/doc.png',
            'sigma.js/src/img/josema.png', 
            'sigma.js/src/img/luis.png',
            'sigma.js/src/img/lugano.png',
            'sigma.js/src/img/noimage.png'],
    g = {
      nodes: [],
      edges: []
    };

// Generate a random graph:
for (i = 0; i < N; i++)
  g.nodes.push({
    id: 'n' + i,
    label: 'Dr. Who #' + i,
    x: Math.random(),
    y: Math.random(),
    size: Math.random(),
    color: '#666',    
    data: {
        name: 'Nicolas',
        gender: 'Male',
        age: 26,
        city: 'NY',
        image: {
        	      url: urls[Math.floor(Math.random() * urls.length)],
        	      // scale/clip are ratio values applied on top of 'size'
        	      scale: 1.3,
        	      clip: 0.85
        	    }

      }

        
  });

for (i = 0; i < E; i++)
  g.edges.push({
    id: 'e' + i,
    source: 'n' + (Math.random() * N | 0),
    target: 'n' + (Math.random() * N | 0),
    size: Math.random(),
    color: '#ccc',
    hover_color: '#000'
  });

sigma.renderers.def = sigma.renderers.canvas;

s = new sigma({
  graph: g,
  renderer: {
    container: document.getElementById('graph-container'),
    type: 'canvas'
  },
  settings: {
    dragNodeStickiness: 0.01,
    borderSize: 2,
    outerBorderSize: 3,
    defaultNodeBorderColor: '#fff',
    defaultNodeOuterBorderColor: 'rgb(236, 81, 72)',
    enableEdgeHovering: false,
    edgeHoverHighlightNodes: 'circle',
    
    
    doubleClickEnabled: true,
    minEdgeSize: 0.5,
    maxEdgeSize: 3,
    enableEdgeHovering: true,
    edgeHoverColor: 'edge',
    defaultEdgeHoverColor: '#000',
    edgeHoverSizeRatio: 1,
    edgeHoverExtremities: true,
    
    drawLabels: false
    
    
  }
});



var config = {
		  node: {
		    show: 'hovers',
		    hide: 'hovers',
		    cssClass: 'sigma-tooltip',
		    position: 'top',
		    autoadjust: true,
		    template:
		    '<div class="arrow"></div>' +
		    ' <div class="sigma-tooltip-header">{{label}}</div>' +
		    ' <div class="avatar" align ="center">' +
		    '<img src={{data.image.url}} alt="avatarimg" style="width:204px;height:128px;" align ="center"></div>'+
		    ' <div class="sigma-tooltip-body">' +
		    '    <table>' +
		    '      <tr><th>Name</th> <td>{{data.name}}</td></tr>' +
		    '      <tr><th>Gender</th> <td>{{data.gender}}</td></tr>' +
		    '      <tr><th>Age</th> <td>{{data.age}}</td></tr>' +
		    '      <tr><th>City</th> <td>{{data.city}}</td></tr>' +
		    '    </table>' +
		    '  </div>' +
		    '  <div class="sigma-tooltip-footer">Number of connections: {{degree}}</div>',
		    renderer: function(node, template) {
		      // The function context is s.graph
		      node.degree = this.degree(node.id);

		      // Returns an HTML string:
		      return Mustache.render(template, node);

		      // Returns a DOM Element:
		      //var el = document.createElement('div');
		      //return el.innerHTML = Mustache.render(template, node);
		    }
		  }
		};



//Instanciate the tooltips plugin with a Mustache renderer for node tooltips:
var tooltips = sigma.plugins.tooltips(s, s.renderers[0], config);

//Manually open a tooltip on a node:
var n = s.graph.nodes('n10');
var prefix = s.renderers[0].camera.prefix;
tooltips.open(n, config.node, n[prefix + 'x'], n[prefix + 'y']);

tooltips.bind('shown', function(event) {
	  console.log('tooltip shown', event);
	});

	tooltips.bind('hidden', function(event) {
	  console.log('tooltip hidden', event);
	});





// Instanciate the ActiveState plugin:
var activeState = sigma.plugins.activeState(s);

// Initialize the dragNodes plugin:
var dragListener = sigma.plugins.dragNodes(s, s.renderers[0], activeState);

// Initialize the Select plugin:
var select = sigma.plugins.select(s, activeState);

// Initialize the Keyboard plugin:
var keyboard = sigma.plugins.keyboard(s, s.renderers[0]);

// Bind the Keyboard plugin to the Select plugin:
select.bindKeyboard(keyboard);

dragListener.bind('startdrag', function(event) {
  console.log(event);
});
dragListener.bind('drag', function(event) {
  console.log(event);
});
dragListener.bind('drop', function(event) {
  console.log(event);
});
dragListener.bind('dragend', function(event) {
  console.log(event);
});
</script>
